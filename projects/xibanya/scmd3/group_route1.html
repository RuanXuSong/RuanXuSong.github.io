<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/upload_list.css">
    <link rel="stylesheet" href="css/bill_payee.css">
    <link rel="stylesheet" href="css/calendar_end.css">
    <link rel="stylesheet" href="css/city.css">
	<title>团行程</title>
	<style>
		.content1{
            display: none;
            background: #fff;
		    position: absolute;
		    top: 86px;
		    left: 0;
		    padding-top: 33px;
		    width: 100%;
		    height: 100%;
		    z-index: 10;
        }
        .reach_word,.leave_word{
        	position: absolute;
        	top: 12px;
        	left: 0;
        	width: 100%;
        	text-align: center;
        	z-index: 12;
        	display: none;
			font-size: 15px;
        }
        .confirm_btn{
        	color: #1fbdef;
        	font-size: 17px;
        	position: absolute;
        	top: 31px;
        	right: 20px;
        }
        .city_box{
        	position: absolute;
        	width: 100%;
        	top: 0;
        	left: 0;
        	height: 100%;
        	background: #fff;
        }
	</style>
</head>
<body scroll="no" style="overflow-x:hidden;">
	<div class="header">
		<a  href='#' onClick="javascript :window.history.go(-1);" class="back_icon"><img src="images/upload_03.png" alt=""></a>团行程
	</div>
	<!-- 城市模块 -->
<div class="city_box" style="z-index: 9999; ">
  <div class="city">
    <div class="city-list">
      <p data-id="0101">阿尔赫西拉斯</p>
      <p data-id="0102">阿利坎特</p>
      <p data-id="0103">阿斯图里亚斯</p>
      <p data-id="0104">安达卢西亚</p>
    </div>
  </div>
</div>
	<!-- 日历模块 -->
<div class="content1">
	<div class="reach_word">抵达时间</div>
	<div class="leave_word">离开时间</div>
	<div class="confirm_btn">确定</div>
		<div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year">2017</span>-<span class="f-month">1</span></div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody clearfix">

	            </div>
	        </div>
	    </div>
	    <div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year1">2017</span>-<span class="f-month1">1</span></div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table1">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody1 clearfix">

	            </div>
	        </div>
	    </div>
	    <div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year2">2017</span>-<span class="f-month2">1</span></div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table2">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody2 clearfix">

	            </div>
	        </div>
	    </div>
	</div>
	<div class="content clearfix">
		<div class="group_num_li">
			旅行社<span class="group_num"><input type="text" placeholder="选填"></span>
		</div>
		<div class="route_list">
			<div class="list_head">
				行程安排
			</div>
			<div class="list_body">		
				<table class="list_table">
					<thead>
						<tr>
							<th colspan="3">行程1</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<div class="list_table_wd">
									<span class="y-circle"></span>
									<input type="text" class="choose_city" placeholder="选择城市">
								</div>	
							</td>
							<td>
								<span class="p-circle"></span>
								<input class="reach_time" value="2017-05-12">
							</td>
							<td>								
								<span class="r-circle"></span>
								<input class="leave_time" value="2017-05-12">				
							</td>
						</tr>							
						<tr>								
							<td class="border_1">
								住宿酒店
							</td>
							<td colspan="2" class="border_2 txt_right">
								<input type="text" class="hotel_address" placeholder="请填写酒店地址" value="12345678">
							</td>								
						</tr>

						<tr>
							<td>
								<button class="choose_btn">选择商家</button>
							</td>
							<td colspan="2">
								我不选择，系统默认提交名单至所有商家
							</td>
						</tr>
					</tbody>
				</table>
				<table class="list_table">
					<thead>
						<tr>
							<th colspan="3">行程2</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<div class="list_table_wd">
									<span class="y-circle"></span>
									<input type="text" class="choose_city" placeholder="选择城市">
								</div>	
							</td> 
							<td>
								<span class="p-circle"></span>
								<input class="reach_time" placeholder="选择抵达时间">
							</td>
							<td>								
								<span class="r-circle"></span>
								<input class="leave_time" placeholder="选择离开时间">					
							</td>
						</tr>							
						<tr>								
							<td class="border_1">
								住宿酒店
							</td>
							<td colspan="2" class="border_2 txt_right">
								<input type="text" class="hotel_address" placeholder="请填写酒店地址">
							</td>								
						</tr>

						<tr>
							<td>
								<button class="choose_btn">选择商家</button>
							</td>
							<td colspan="2">
								我不选择，系统默认提交名单至所有商家
							</td>
						</tr>
					</tbody>
				</table>		
			</div>
			<div class="add_route">
				<a href=""><img src="images/group_route_03.png" alt="">添加行程</a>
			</div>
			<div class="add_route">		
				<a href="javascript:;" class="upload_btn">
					<input type="file" onchange="document.getElementById('file_name').innerHTML=this.value"><img src="images/group_route_06.png" alt=""><div id="file_name">选择文件</div>
				</a>				
			</div>
			<div class="add_route">
				上传文件图片给我们办公室，由工作人员帮您录入行程单
			</div>
			<div class="submit_btn_wrap submit_btn_wrap2">
			<input type="button" value="下一步" class="submit_btn">
		</div>
		</div>
	</div>
	<script src="js/jquery.min.js"></script>
		<script>
		function hasClass1(element, cls) {
		    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
		}
		
    
$(function(){
                //页面加载初始化年月
                var mydate = new Date();
                $(".f-year").html( mydate.getFullYear() );
                $(".f-month").html( mydate.getMonth()+1 ); 
                if (mydate.getMonth()==11) {                  
                $(".f-year1").html( mydate.getFullYear()+1 );
                $(".f-month1").html( 1);
                }
                else{
                $(".f-year1").html( mydate.getFullYear() );
                $(".f-month1").html( mydate.getMonth()+2 );
                }     
                if (mydate.getMonth()==10) {
                  $(".f-year2").html( mydate.getFullYear()+1 );
                  $(".f-month2").html( 1);  
                }
                else if (mydate.getMonth()==11) {
                  $(".f-year2").html( mydate.getFullYear()+1 );
                  $(".f-month2").html( 2);  
                }   
                else{
                  $(".f-year2").html( mydate.getFullYear() );
                  $(".f-month2").html( mydate.getMonth()+3 );  
                }  
                showDate1(mydate.getFullYear(),mydate.getMonth()+1);
                })
                //日历上一月
                $(".f-btn-jian ").click(function(){
                    var mm = parseInt($(".f-month").html());
                    var yy = parseInt($(".f-year").html());
                    if( mm == 1){//返回12月
                        $(".f-year").html(yy-1);
                        $(".f-month").html(12);
                        showDate1(yy-1,12);
                    }else{//上一月
                        $(".f-month").html(mm-1);
                        showDate1(yy,mm-1);
                    }
                })
                //日历下一月
                $(".f-btn-jia").click(function(){
                    var mm = parseInt($(".f-month").html());
                    var yy = parseInt($(".f-year").html());
                    if( mm == 12){//返回12月
                        $(".f-year").html(yy+1);
                        $(".f-month").html(1);
                        showDate1(yy+1,1);
                    }else{//上一月
                        $(".f-month").html(mm+1);
                        showDate1(yy,mm+1);
                    }
                })
                //返回本月
                $(".f-btn-fhby").click(function(){
                    $(".f-year").html( mydate.getFullYear() );
                    $(".f-month").html( mydate.getMonth()+1 );
                    showDate1(mydate.getFullYear(),mydate.getMonth()+1);
                })
                
            function showDate1(yyyy,mm){
                var mydate = new Date();
                var mystr ="";
                function showDate(yyyy,mm){
                    var dd = new Date(parseInt(yyyy),parseInt(mm), 0);   //Wed Mar 31 00:00:00 UTC+0800 2010  
                    var daysCount = dd.getDate();            //本月天数  
                   
                    var icon = "";//图标代码
                    var today = new Date().getDate(); //今天几号  21
                    var monthstart = new Date(parseInt(yyyy)+"/"+parseInt(mm)+"/1").getDay()//本月1日周几  
                    var lastMonth; //上一月天数
                    var nextMounth//下一月天数
                    if(  parseInt(mm) ==1 ){
                        lastMonth = new Date(parseInt(yyyy)-1,parseInt(12), 0).getDate();
                    }else{
                        lastMonth = new Date(parseInt(yyyy),parseInt(mm)-1, 0).getDate();
                    }
                    if( parseInt(mm) ==12 ){
                        nextMounth = new Date(parseInt(yyyy)+1,parseInt(1), 0).getDate();
                    }else{
                        nextMounth = new Date(parseInt(yyyy),parseInt(mm)+1, 0).getDate();
                    }
                    //计算上月空格数
                    for(j=monthstart;j>0;j--){
                        mystr += "<div class='f-td f-null' style='color:#ccc;'></div>";
                    }             
                    //本月单元格
                    for(i=0;i<daysCount;i++){
                         //这里为一个单元格，添加内容在此
                        mystr += "<div class='f-td f-number'><span class='f-day'>"+(i+1)+"</span>"
                                +"<div class='f-yuan'></div>"
                                +"<div class='f-table-msg'>回款中<span class='major'>1</span>笔。回款本息;<span class='major'>1，000，000</span>元</div>"//这里加判断
                                +"</div>"; 
                    }                   
                    //计算下月空格数
                    for(k=0; k<42-(daysCount+monthstart);k++ ){//表格保持等高6行42个单元格
                        mystr += "<div class='f-td f-null f-nextMounth' style='color:#ccc;'>"+(k+1)+"</div>";
                    }    
                    //写入日历
                    
                    //给今日加class
                    
                    
                    
                    //绑定查看方法
                    $(".f-yuan").off("mouseover");
                    $(".f-yuan").on("mouseover",function(){
                        $(this).parent().find(".f-table-msg").show();
                    });
                    $(".f-table-msg").off("mouseover");
                    $(".f-table-msg").on("mouseover",function(){
                        $(this).show();
                    });
                    $(".f-yuan").off("mouseleave");
                    $(".f-yuan").on("mouseleave",function(){
                        $(this).parent().find(".f-table-msg").hide();
                    });
                    $(".f-table-msg").off("mouseleave");
                    $(".f-table-msg").on("mouseleave",function(){
                        $(this).hide();
                    });
                }
                showDate(yyyy,mm);
                 
                   
                $(".f-rili-table .f-tbody").html(mystr);
                // 下个月
                mystr='';
                if (mm==12) {
                    mm=1;
                    yyyy+=1;
                    showDate(yyyy+1,1);
                    $(".f-rili-table1 .f-tbody1").html(mystr);
                   } 
                
                else{
                    showDate(yyyy,mm+1);
                    $(".f-rili-table1 .f-tbody1").html(mystr);
                }
                //下下月
                 mystr='';
                if (mm==11) {
                    mm=1;
                    yyyy+=1;
                    showDate(yyyy+1,1);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                   } 
                else if (mm==12) {
                    mm=2;
                    yyyy+=1;
                    showDate(yyyy+1,2);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                   } 
                else{
                    showDate(yyyy,mm+2);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                }
                
                    //绑定选择方法
                    $(".f-number").off("click");
                    $(".f-number").on("click",function(){
                        $(".f-number").removeClass("f-on");
                        $(this).addClass("f-on");
                        var fday=$(this).find('.f-day').text();
                        
                        var fdate=$(this).parents('.account-box').find('.f-riqi').text();
                        
                        var ftoday=fdate+'-'+fday;
                       // 插入程序
                   		$('.reach_flag').find('.reach_time').val(ftoday);
						$('.leave_flag').find('.leave_time').val(ftoday);
                    }); 
                   
            }
 				$('.confirm_btn').click(function(event) {
						var list=document.querySelectorAll('.list_table');
							$('.content1').fadeOut();							
							$('.list_table').removeClass('reach_flag');
							$('.list_table').removeClass('leave_flag');
							$('.reach_word').hide();
							$('.leave_word').hide();	
						})
            $('.reach_time').click(function(event) {
		        $('.content1').slideToggle();
		        $('.reach_word').show();
		        $(this).parents('.list_table').addClass('reach_flag');

		    });
		    $('.leave_time').click(function(event) {
		        $('.content1').slideToggle();
		        $('.leave_word').show();
		        $(this).parents('.list_table').addClass('leave_flag');
		    });
	
            $(function(){
            	var monthstart = new Date().getDay();
            	var nowDay = new Date().getDate(); //当前日 
				$(".f-rili-table .f-number").eq(nowDay-1).addClass("f-today");
                $(".f-today").prevAll().addClass('bef_td').find('.f-day').css('color', '#ddd');
            })     
</script>
<script>
	
$('body').on('click', '.choose_city', function () {
	var zid = $(this).attr('id');
	 $(".city_box").slideToggle();
});
//选择城市 start
$('body').on('click', '.city-list p', function () {
	var type = $('.container').data('type');
	$('.city_box').hide();
});
$('.city-list p').click(function(){
	$('.choose_city').val($(this).text());
})
//关键词匹配搜索
function searchCity() {
    var searchCityName = $("#search_city").val();
    if (searchCityName == "") {
      $(".city-list p").show();
    };   
     if (searchCityName != "") 
     { 
      $(".city_box").show();
      $(".letter").show();
      $(".city-list p").each(          
        function() {
              var cityName =  $(this).text();                    
              if  (cityName.indexOf(searchCityName) != -1) {
             $(this).show();
            } else {
              $(this).hide();
            }
          });
    }
  }
</script>
</body>
</html>