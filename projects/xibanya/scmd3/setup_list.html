<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/upload_list.css">
    <link rel="stylesheet" href="css/bill_payee.css">
    <link rel="stylesheet" href="css/calendar_end.css">
	<title>创建名单</title>
	<style>
		.content1{
            display: none;
            background: #fff;
		    position: absolute;
		    top: 86px;
		    left: 0;
		    padding-top: 33px;
		    width: 100%;
		    height: 100%;
		    z-index: 10;
        }
        .reach_word,.leave_word{
        	position: absolute;
        	top: 12px;
        	left: 0;
        	width: 100%;
        	text-align: center;
        	z-index: 12;
        	display: none;
			font-size: 15px;
        }
        .confirm_btn{
        	color: #1fbdef;
        	font-size: 17px;
        	position: fixed;
        	top: 100px;
        	right: 20px;
        	z-index: 99;
        }
        .city_box{
        	position: absolute;
        	width: 100%;
        	top: 0;
        	left: 0;
        	height: 100%;
        	background: #fff;
        }
	</style>
</head>
<body scroll="no" style="overflow-x:hidden;">
	<div class="header">
		<a href="../sy/SHXQ.html" class="back_icon"><img src="images/upload_03.png" alt=""></a>创建名单
	</div>
	<!-- 日历模块 -->
<div class="content1">
	<div class="reach_word">开始时间</div>
	<div class="leave_word">结束时间</div>
	<div class="confirm_btn">确定</div>
		<div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year">2017</span>-<span class="f-month">1</span></div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody clearfix">

	            </div>
	        </div>
	    </div>
	    <div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year1">2017</span>-<span class="f-month1">1</span></div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table1">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody1 clearfix">

	            </div>
	        </div>
	    </div>
	    <div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year2">2017</span>-<span class="f-month2">1</span></div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table2">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody2 clearfix">

	            </div>
	        </div>
	    </div>
	</div>
	<div class="content clearfix">
		<div class="group_num_li">
			团号<span class="group_num">123456</span>
		</div>
		<div class="payee_list date_list clearfix">
			<form action="?" method="post">
				<div class="inputs_wrap">
					<table>
						<tbody>
							<tr>
								<th>有效期</th>
								<td>
									
								</td>
							</tr>
							<tr>
								<th class="black">起始时间</th>
								<td>
									<input type="text" name="time_start" placeholder="请选择起始时间" id="J_time_start" class="payee_list_input  start_time" >
								</td>
							</tr>
							<tr class="last">
								<th class="black">结束时间</th>
								<td>
									<input type="text" name="time_end"  placeholder="请输入结束时间" id="J_time_end" class="payee_list_input end_time" >
								</td>
							</tr>
						</tbody>
					</table>	
				</div>
				<div class="submit_btn_wrap submit_btn_wrap1">
					<input type="button" value="下一步" class="submit_btn">
				</div>
			</form>
		</div>
	</div>
	<script src="js/jquery.min.js"></script>
	<script>
		$('.payee_name_li').click(function() {
			$(this).next().slideToggle();
			if ($(this).hasClass('top')) {
			$(this).removeClass('top').find('.down_icon img').attr('src',"images/search_store_03.png"); 	
			}
			else {
			$(this).addClass('top').find('.down_icon img').attr('src',"images/bill_payee_07.png"); 
		};
		});

	</script>
	<script>
		function hasClass1(element, cls) {
		    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
		}
		
    
$(function(){
                //页面加载初始化年月
                var mydate = new Date();
                $(".f-year").html( mydate.getFullYear() );
                $(".f-month").html( mydate.getMonth()+1 ); 
                if (mydate.getMonth()==11) {                  
                $(".f-year1").html( mydate.getFullYear()+1 );
                $(".f-month1").html( 1);
                }
                else{
                $(".f-year1").html( mydate.getFullYear() );
                $(".f-month1").html( mydate.getMonth()+2 );
                }     
                if (mydate.getMonth()==10) {
                  $(".f-year2").html( mydate.getFullYear()+1 );
                  $(".f-month2").html( 1);  
                }
                else if (mydate.getMonth()==11) {
                  $(".f-year2").html( mydate.getFullYear()+1 );
                  $(".f-month2").html( 2);  
                }   
                else{
                  $(".f-year2").html( mydate.getFullYear() );
                  $(".f-month2").html( mydate.getMonth()+3 );  
                }  
                showDate1(mydate.getFullYear(),mydate.getMonth()+1);
                })
                //日历上一月
                $(".f-btn-jian ").click(function(){
                    var mm = parseInt($(".f-month").html());
                    var yy = parseInt($(".f-year").html());
                    if( mm == 1){//返回12月
                        $(".f-year").html(yy-1);
                        $(".f-month").html(12);
                        showDate1(yy-1,12);
                    }else{//上一月
                        $(".f-month").html(mm-1);
                        showDate1(yy,mm-1);
                    }
                })
                //日历下一月
                $(".f-btn-jia").click(function(){
                    var mm = parseInt($(".f-month").html());
                    var yy = parseInt($(".f-year").html());
                    if( mm == 12){//返回12月
                        $(".f-year").html(yy+1);
                        $(".f-month").html(1);
                        showDate1(yy+1,1);
                    }else{//上一月
                        $(".f-month").html(mm+1);
                        showDate1(yy,mm+1);
                    }
                })
                //返回本月
                $(".f-btn-fhby").click(function(){
                    $(".f-year").html( mydate.getFullYear() );
                    $(".f-month").html( mydate.getMonth()+1 );
                    showDate1(mydate.getFullYear(),mydate.getMonth()+1);
                })
                
            function showDate1(yyyy,mm){
                var mydate = new Date();
                var mystr ="";
                function showDate(yyyy,mm){
                    var dd = new Date(parseInt(yyyy),parseInt(mm), 0);   //Wed Mar 31 00:00:00 UTC+0800 2010  
                    var daysCount = dd.getDate();            //本月天数  
                   
                    var icon = "";//图标代码
                    var today = new Date().getDate(); //今天几号  21
                    var monthstart = new Date(parseInt(yyyy)+"/"+parseInt(mm)+"/1").getDay()//本月1日周几  
                    var lastMonth; //上一月天数
                    var nextMounth//下一月天数
                    if(  parseInt(mm) ==1 ){
                        lastMonth = new Date(parseInt(yyyy)-1,parseInt(12), 0).getDate();
                    }else{
                        lastMonth = new Date(parseInt(yyyy),parseInt(mm)-1, 0).getDate();
                    }
                    if( parseInt(mm) ==12 ){
                        nextMounth = new Date(parseInt(yyyy)+1,parseInt(1), 0).getDate();
                    }else{
                        nextMounth = new Date(parseInt(yyyy),parseInt(mm)+1, 0).getDate();
                    }
                    //计算上月空格数
                    for(j=monthstart;j>0;j--){
                        mystr += "<div class='f-td f-null f-lastMonth' style='color:#ccc;'>"+(lastMonth-j+1)+"</div>";
                    }
                    
                    //本月单元格
                    for(i=0;i<daysCount;i++){
                         //这里为一个单元格，添加内容在此
                        mystr += "<div class='f-td f-number'><span class='f-day'>"+(i+1)+"</span>"
                                +"<div class='f-yuan'></div>"
                                +"<div class='f-table-msg'>回款中<span class='major'>1</span>笔。回款本息;<span class='major'>1，000，000</span>元</div>"//这里加判断
                                +"</div>"; 
                    }
                    
                    //计算下月空格数
                    for(k=0; k<42-(daysCount+monthstart);k++ ){//表格保持等高6行42个单元格
                        mystr += "<div class='f-td f-null f-nextMounth' style='color:#ccc;'>"+(k+1)+"</div>";
                    }
                     
                    
                    
                    //写入日历
                    
                    //给今日加class
                   
                    
                    //绑定查看方法
                    $(".f-yuan").off("mouseover");
                    $(".f-yuan").on("mouseover",function(){
                        $(this).parent().find(".f-table-msg").show();
                    });
                    $(".f-table-msg").off("mouseover");
                    $(".f-table-msg").on("mouseover",function(){
                        $(this).show();
                    });
                    $(".f-yuan").off("mouseleave");
                    $(".f-yuan").on("mouseleave",function(){
                        $(this).parent().find(".f-table-msg").hide();
                    });
                    $(".f-table-msg").off("mouseleave");
                    $(".f-table-msg").on("mouseleave",function(){
                        $(this).hide();
                    });
                }
                showDate(yyyy,mm);
                $(".f-rili-table .f-tbody").html(mystr);
                // 下个月
                mystr='';
                if (mm==12) {
                    mm=1;
                    yyyy+=1;
                    showDate(yyyy+1,1);
                    $(".f-rili-table1 .f-tbody1").html(mystr);
                   } 
                
                else{
                    showDate(yyyy,mm+1);
                    $(".f-rili-table1 .f-tbody1").html(mystr);
                }
                //下下月
                 mystr='';
                if (mm==11) {
                    mm=1;
                    yyyy+=1;
                    showDate(yyyy+1,1);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                   } 
                else if (mm==12) {
                    mm=2;
                    yyyy+=1;
                    showDate(yyyy+1,2);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                   } 
                else{
                    showDate(yyyy,mm+2);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                }
                 if( mydate.getFullYear() == yyyy){
                        if( (mydate.getMonth()+1 ) == mm){
                            var today = mydate.getDate();
                            var lastNum = $(".f-lastMonth").length;
                            $(".f-rili-table .f-td").eq(today+lastNum-8).addClass("f-today");
                        }
                    }
                    //绑定选择方法
                    $(".f-number").off("click");
                    $(".f-number").on("click",function(){
                        $(".f-number").removeClass("f-on");
                        $(this).addClass("f-on");
                        var fday=$(this).find('.f-day').text();
                        console.log(fday);
                        var fdate=$(this).parents('.account-box').find('.f-riqi').text();
                        console.log(fdate);
                        var ftoday=fdate+'-'+fday;
                       // 插入程序
                   		$('.reach_flag').val(ftoday);
						$('.leave_flag').val(ftoday);					
                    });         
            }
			$('.confirm_btn').click(function(event) {
				
					$('.content1').fadeOut();							
					$('.end_time').removeClass('reach_flag');
					$('.end_time').removeClass('leave_flag');
					$('.start_time').removeClass('reach_flag');
					$('.start_time').removeClass('leave_flag');
					$('.reach_word').hide();
					$('.leave_word').hide();	
				})
            $('.start_time').click(function(event) {
		        $('.content1').slideToggle();
		        $('.reach_word').show();
		        $(this).addClass('reach_flag');
		    });
		    $('.end_time').click(function(event) {
		        $('.content1').slideToggle();
		        $('.leave_word').show();
		        $(this).addClass('leave_flag');
		    });
            $(function(){
                $(".f-today").prevAll().addClass('bef_td').find('.f-day').css('color', '#ddd');
            })   
</script>
</body>
</html>