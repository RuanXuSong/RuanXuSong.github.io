<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/upload_list.css">
	<link rel="stylesheet" href="css/calendar_end.css">
	<title>选择结束时间</title>
    <style>
        .content1{
            display: none;
            position: absolute;
            top: 82px;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
        }
        .show_btn{
            width: 100px;
            height: 50px;
            line-height: 50px;
            border-radius: 5px;
            background: red;
            color: #fff;
            position: absolute;
            z-index: 20;
            left: 10px;
            top: 10px;
            text-align: center;
        }
        .start_time{
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 9999;
        }
    </style>
</head>
<body scroll="no" style="overflow-x:hidden;">
	<div class="header">
		<a href='#' onClick="javascript :window.history.go(-1);" class="back_icon"><img src="images/upload_03.png" alt=""></a>选择结束时间
		<a href="" class="confirm_wd">确定</a>	
	</div>
    <div class="show_btn">
        显示日历
    </div>
    <div class="start_time">起始时间：<input type="text" placeholder="请输入起始时间"></div>
	<div class="content1">
		<div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year">2017</span>年<span class="f-month">1</span>月</div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody clearfix">

	            </div>
	        </div>
	    </div>
	    <div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year1">2017</span>年<span class="f-month1">1</span>月</div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table1">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody1 clearfix">

	            </div>
	        </div>
	    </div>
	    <div class="account-box">
	        <h2 class="account-title">
	            <div class="clearfix center">
	               <div class="f-riqi"><span class="f-year2">2017</span>年<span class="f-month2">1</span>月</div><!-- 一定不能换行-->
	            </div>
	        </h2>
	        <div class="f-rili-table2">
	            <div class="f-rili-head celarfix">
	                <div class="f-rili-th">日</div>
	                <div class="f-rili-th">一</div>
	                <div class="f-rili-th">二</div>
	                <div class="f-rili-th">三</div>
	                <div class="f-rili-th">四</div>
	                <div class="f-rili-th">五</div>
	                <div class="f-rili-th">六</div>
	                <div class="clear"></div>
	            </div>
	            <div class="f-tbody2 clearfix">

	            </div>
	        </div>
	    </div>
	</div>
	
	<script src="js/jquery.min.js"></script>
	<script>
    $('.show_btn').click(function(event) {
        $('.content1').slideToggle();
    });
$(function(){
                //页面加载初始化年月
                var mydate = new Date();
                $(".f-year").html( mydate.getFullYear() );
                $(".f-month").html( mydate.getMonth()+1 ); 
                if (mydate.getMonth()==11) {                  
                $(".f-year1").html( mydate.getFullYear()+1 );
                $(".f-month1").html( 1);
                }
                else{
                $(".f-year1").html( mydate.getFullYear() );
                $(".f-month1").html( mydate.getMonth()+2 );
                }     
                if (mydate.getMonth()==10) {
                  $(".f-year2").html( mydate.getFullYear()+1 );
                  $(".f-month2").html( 1);  
                }
                else if (mydate.getMonth()==11) {
                  $(".f-year2").html( mydate.getFullYear()+1 );
                  $(".f-month2").html( 2);  
                }   
                else{
                  $(".f-year2").html( mydate.getFullYear() );
                  $(".f-month2").html( mydate.getMonth()+3 );  
                }  
                showDate1(mydate.getFullYear(),mydate.getMonth()+1);
                })
                //日历上一月
                $(".f-btn-jian ").click(function(){
                    var mm = parseInt($(".f-month").html());
                    var yy = parseInt($(".f-year").html());
                    if( mm == 1){//返回12月
                        $(".f-year").html(yy-1);
                        $(".f-month").html(12);
                        showDate1(yy-1,12);
                    }else{//上一月
                        $(".f-month").html(mm-1);
                        showDate1(yy,mm-1);
                    }
                })
                //日历下一月
                $(".f-btn-jia").click(function(){
                    var mm = parseInt($(".f-month").html());
                    var yy = parseInt($(".f-year").html());
                    if( mm == 12){//返回12月
                        $(".f-year").html(yy+1);
                        $(".f-month").html(1);
                        showDate1(yy+1,1);
                    }else{//上一月
                        $(".f-month").html(mm+1);
                        showDate1(yy,mm+1);
                    }
                })
                //返回本月
                $(".f-btn-fhby").click(function(){
                    $(".f-year").html( mydate.getFullYear() );
                    $(".f-month").html( mydate.getMonth()+1 );
                    showDate1(mydate.getFullYear(),mydate.getMonth()+1);
                })
                
            function showDate1(yyyy,mm){
                var mydate = new Date();
                var mystr ="";
                function showDate(yyyy,mm){
                    var dd = new Date(parseInt(yyyy),parseInt(mm), 0);   //Wed Mar 31 00:00:00 UTC+0800 2010  
                    var daysCount = dd.getDate();            //本月天数  
                   
                    var icon = "";//图标代码
                    var today = new Date().getDate(); //今天几号  21
                    var monthstart = new Date(parseInt(yyyy)+"/"+parseInt(mm)+"/1").getDay()//本月1日周几  
                    var lastMonth; //上一月天数
                    var nextMounth//下一月天数
                    if(  parseInt(mm) ==1 ){
                        lastMonth = new Date(parseInt(yyyy)-1,parseInt(12), 0).getDate();
                    }else{
                        lastMonth = new Date(parseInt(yyyy),parseInt(mm)-1, 0).getDate();
                    }
                    if( parseInt(mm) ==12 ){
                        nextMounth = new Date(parseInt(yyyy)+1,parseInt(1), 0).getDate();
                    }else{
                        nextMounth = new Date(parseInt(yyyy),parseInt(mm)+1, 0).getDate();
                    }
                    //计算上月空格数
                    for(j=monthstart;j>0;j--){
                        mystr += "<div class='f-td f-null f-lastMonth' style='color:#ccc;'>"+(lastMonth-j+1)+"</div>";
                    }
                    
                    //本月单元格
                    for(i=0;i<daysCount;i++){
                         //这里为一个单元格，添加内容在此
                        mystr += "<div class='f-td f-number'><span class='f-day'>"+(i+1)+"</span>"
                                +"<div class='f-yuan'></div>"
                                +"<div class='f-table-msg'>回款中<span class='major'>1</span>笔。回款本息;<span class='major'>1，000，000</span>元</div>"//这里加判断
                                +"</div>"; 
                    }
                    
                    //计算下月空格数
                    for(k=0; k<42-(daysCount+monthstart);k++ ){//表格保持等高6行42个单元格
                        mystr += "<div class='f-td f-null f-nextMounth' style='color:#ccc;'>"+(k+1)+"</div>";
                    }
                     
                    
                    
                    //写入日历
                    
                    //给今日加class
                   
                    
                    //绑定查看方法
                    $(".f-yuan").off("mouseover");
                    $(".f-yuan").on("mouseover",function(){
                        $(this).parent().find(".f-table-msg").show();
                    });
                    $(".f-table-msg").off("mouseover");
                    $(".f-table-msg").on("mouseover",function(){
                        $(this).show();
                    });
                    $(".f-yuan").off("mouseleave");
                    $(".f-yuan").on("mouseleave",function(){
                        $(this).parent().find(".f-table-msg").hide();
                    });
                    $(".f-table-msg").off("mouseleave");
                    $(".f-table-msg").on("mouseleave",function(){
                        $(this).hide();
                    });
                }
                showDate(yyyy,mm);
                $(".f-rili-table .f-tbody").html(mystr);
                // 下个月
                mystr='';
                if (mm==12) {
                    mm=1;
                    yyyy+=1;
                    showDate(yyyy+1,1);
                    $(".f-rili-table1 .f-tbody1").html(mystr);
                   } 
                
                else{
                    showDate(yyyy,mm+1);
                    $(".f-rili-table1 .f-tbody1").html(mystr);
                }
                //下下月
                 mystr='';
                if (mm==11) {
                    mm=1;
                    yyyy+=1;
                    showDate(yyyy+1,1);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                   } 
                else if (mm==12) {
                    mm=2;
                    yyyy+=1;
                    showDate(yyyy+1,2);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                   } 
                else{
                    showDate(yyyy,mm+2);
                    $(".f-rili-table2 .f-tbody2").html(mystr);
                }
                 if( mydate.getFullYear() == yyyy){
                        if( (mydate.getMonth()+1 ) == mm){
                            var today = mydate.getDate();
                            var lastNum = $(".f-lastMonth").length;
                            $(".f-rili-table .f-td").eq(today+lastNum-8).addClass("f-today");
                        }
                    }
                    //绑定选择方法
                    $(".f-number").off("click");
                    $(".f-number").on("click",function(){
                        $(".f-number").removeClass("f-on");
                        $(this).addClass("f-on");
                        var fday=$(this).find('.f-day').text();
                        console.log(fday);
                        var fdate=$(this).parents('.account-box').find('.f-riqi').text();
                        console.log(fdate);
                        var ftoday=fdate+fday+'日';
                        $('.start_time input').val(ftoday);
                    });
            }
            $(function(){
                $(".f-today").prevAll().addClass('bef_td').find('.f-day').css('color', '#ddd');
            })     
</script>
</body>
</html>
